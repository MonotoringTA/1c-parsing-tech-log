
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	//Вставить содержимое обработчика
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	Если ЗначениеЗаполнено(Замер) Тогда
		ЗагрузитьНастройки(Неопределено);
	КонецЕсли;
	ИспользоватьФильтрыДанныхЗамеровПриИзменении(Неопределено);
КонецПроцедуры

&НаКлиенте
Процедура СохранитьНастройки(Команда)
	мНастройка = новый Структура();
	мНастройка.Вставить("НечеткийКонтроллер",НечеткийКонтроллер);
	мНастройка.Вставить("СохранятьЗначенияПреобразованияСигналов",СохранятьЗначенияПреобразованияСигналов);
	мНастройка.Вставить("ИспользоватьФильтрыДанныхЗамеров",ИспользоватьФильтрыДанныхЗамеров);
	МассивСтруктур = новый Массив;
	Для каждого стр из ТаблицаСвязейВходовДанных Цикл
		Структура = новый Структура("Замер,Свойство,НомерВхода,Ключ");
		ЗаполнитьЗначенияСвойств(Структура,стр);
		МассивСтруктур.Добавить(Структура);
	КонецЦикла;
	мНастройка.Вставить("МассивСтруктурСвязейВходовДанных",МассивСтруктур);
	УправлениеХранилищемНастроекВызовСервера.ЗаписатьДанныеВБезопасноеХранилищеРасширенный(Замер,мНастройка,"Настройка нейронной сети для обработки данных по замеру");
КонецПроцедуры

&НаКлиенте
Процедура ЗагрузитьНастройки(Команда)
	мНастройка = УправлениеХранилищемНастроекВызовСервера.ДанныеИзБезопасногоХранилища(Замер);
	Если мНастройка<>Неопределено Тогда
		НечеткийКонтроллер = мНастройка.НечеткийКонтроллер;
		СохранятьЗначенияПреобразованияСигналов = мНастройка.СохранятьЗначенияПреобразованияСигналов;
		Если НЕ мНастройка.Свойство("ИспользоватьФильтрыДанныхЗамеров",ИспользоватьФильтрыДанныхЗамеров) Тогда
			ИспользоватьФильтрыДанныхЗамеров = Ложь;
		КонецЕсли;
		ТаблицаСвязейВходовДанных.Очистить();
		Для каждого стр из мНастройка.МассивСтруктурСвязейВходовДанных Цикл
			стр_н = ТаблицаСвязейВходовДанных.Добавить();
			ЗаполнитьЗначенияСвойств(стр_н,стр);
		КонецЦикла;
	КонецЕсли;
КонецПроцедуры

&НаСервере
Процедура ВыполнитьОбработкуНаСервере()
	мОбъект = РеквизитФормыВЗначение("Объект");
	мОбъект.ОбработатьДанныеНечеткимКонтроллером(Замер);
КонецПроцедуры


&НаКлиенте
Процедура ВыполнитьОбработку(Команда)
	ВыполнитьОбработкуНаСервере();
КонецПроцедуры

&НаКлиенте
Процедура ИспользоватьФильтрыДанныхЗамеровПриИзменении(Элемент)
	Если ИспользоватьФильтрыДанныхЗамеров=Истина Тогда
		Элементы.ТаблицаСвязейВходовДанныхФильтрСвойство.Видимость = Истина;
		Элементы.ТаблицаСвязейВходовДанныхФильтрЗначение.Видимость = Истина;
	Иначе
		Элементы.ТаблицаСвязейВходовДанныхФильтрСвойство.Видимость = Ложь;
		Элементы.ТаблицаСвязейВходовДанныхФильтрЗначение.Видимость = Ложь;
	КонецЕсли;
КонецПроцедуры


//TODO: Загружать количество входов при изменении модели